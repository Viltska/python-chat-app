{% extends "base.html" %}

{% block header %}

<h1>{% block title %} {{ subject_name }} {% endblock %} </h1>
<p>Description: '{{ content }}'</p>
{% endblock %}

{% block content%}

{% if session.username %}


{% if require == 1 and hasRight != True and session.admin != True %}

<div>
    <h2>This area is restricted by a password</h2>
    <form action="/subjectLogin" method="POST">
        <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
        <fieldset>
            <legend>{{ subject_name }} Login</legend>
            <input type="hidden" name="id" value="{{ id }}">
            <p>Password:<br>
                <input type="password" name="password" required></p>
            <input type="submit" value="Log in">
        </fieldset>
    </form>
</div>

{% else %}
<div>
    {% if rooms is defined and rooms|length > 0 %}
    <fieldset>
        <legend>Rooms</legend>
        <ul>
            {% for room in rooms %}
            <li><a href="{{ url_for('room', id=room[0]) }}">{{ room[1] }}</a></li>
            <br>
            {% endfor %}
        </ul>
    </fieldset>
    {% else %}
    <p>This subject doesn't have any rooms yet</p>
    {% endif %}
</div>

<div>
    <p>Create a new room <a href="/create/id={{ id }}">here</a></p>
</div>

{% endif%}

{% else %}
<p> Log in to view the rooms</p>
<br>
<a href="/">Log in</a>
<br>
or
<br>
<a href="/register">Register</a>

{% endif %}

{% endblock %}