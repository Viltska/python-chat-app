{% extends "base.html" %}

{% block header %}
<h1>{% block title %} Search {% endblock %} </h1>
{% endblock %}

{% block content%}

{% if session.username %}

{% if query is defined %}
<h4> found {{ results|length }} matches for '{{ query }}'</h4>

{% endif %}

<div>
    {% if results is defined %}
    <ul>
        {% for result in results %}
        <li>{{ result[0] }}@{{ result[1]}}: '{{ result[2] }}'</li>
        {% endfor %}
    </ul>
    {% endif %}
</div>
<br>

<form action="/result" method="GET">
    <textarea name="query" rows="3" cols="40" required></textarea>
    <br>
    <input type="submit" value="Search">
</form>

{% else %}

<p> You must be logged in to use the search function</p>
<br>
<a href="/">Log in</a>
<br>
or
<br>
<a href="/register">Register</a>

{% endif %}

{% endblock %}